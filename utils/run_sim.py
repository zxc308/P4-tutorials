from time import sleep
import os

def sending_function(self): 
    # First, ensure the outputs directory exists
    os.makedirs('./outputs', exist_ok=True)
    
    # Get all hosts
    h11,h12,h13,h14,h15,h16,h17,h18,h19,h110,h111,h112,h113,h114,h115,h116,h21,h22,h23,h24,h25,h26,h27,h28,h29,h210,h211,h212,h213,h214,h215,h216,h31,h32,h33,h34,h35,h36,h37,h38,h39,h310,h311,h312,h313,h314,h315,h316,h41,h42,h43,h44,h45,h46,h47,h48,h49,h410,h411,h412,h413,h414,h415,h416,h51,h52,h53,h54,h55,h56,h57,h58,h59,h510,h511,h512,h513,h514,h515,h516,h61,h62,h63,h64,h65,h66,h67,h68,h69,h610,h611,h612,h613,h614,h615,h616,h71,h72,h73,h74,h75,h76,h77,h78,h79,h710,h711,h712,h713,h714,h715,h716,h81,h82,h83,h84,h85,h86,h87,h88,h89,h810,h811,h812,h813,h814,h815,h816,h91,h92,h93,h94,h95,h96,h97,h98,h99,h910,h911,h912,h913,h914,h915,h916, = self.net.get('h11','h12','h13','h14','h15','h16','h17','h18','h19','h110','h111','h112','h113','h114','h115','h116','h21','h22','h23','h24','h25','h26','h27','h28','h29','h210','h211','h212','h213','h214','h215','h216','h31','h32','h33','h34','h35','h36','h37','h38','h39','h310','h311','h312','h313','h314','h315','h316','h41','h42','h43','h44','h45','h46','h47','h48','h49','h410','h411','h412','h413','h414','h415','h416','h51','h52','h53','h54','h55','h56','h57','h58','h59','h510','h511','h512','h513','h514','h515','h516','h61','h62','h63','h64','h65','h66','h67','h68','h69','h610','h611','h612','h613','h614','h615','h616','h71','h72','h73','h74','h75','h76','h77','h78','h79','h710','h711','h712','h713','h714','h715','h716','h81','h82','h83','h84','h85','h86','h87','h88','h89','h810','h811','h812','h813','h814','h815','h816','h91','h92','h93','h94','h95','h96','h97','h98','h99','h910','h911','h912','h913','h914','h915','h916',) 
    
    # Create outputs directory in each host
    for host in [h59, h510, h511, h512, h513, h514, h515, h516, 
                h61, h62, h63, h64, h65, h66, h67, h68, h69, h610, h611, h612, h613, h614, h615, h616,
                h71, h72, h73, h74, h75, h76, h77, h78, h79, h710, h711, h712, h713, h714, h715, h716,
                h81, h82, h83, h84, h85, h86, h87, h88, h89, h810, h811, h812, h813, h814, h815, h816,
                h91, h92, h93, h94, h95, h96, h97, h98, h99, h910, h911, h912, h913, h914, h915, h916]:
        host.cmd('mkdir -p ./outputs')
    
    # Start receivers
    h59.cmd('iperf -s  > ./outputs/receiver_h59.txt &') 
    h510.cmd('iperf -s  > ./outputs/receiver_h510.txt &') 
    h511.cmd('iperf -s  > ./outputs/receiver_h511.txt &') 
    h512.cmd('iperf -s  > ./outputs/receiver_h512.txt &') 
    h513.cmd('iperf -s  > ./outputs/receiver_h513.txt &') 
    h514.cmd('iperf -s  > ./outputs/receiver_h514.txt &') 
    h515.cmd('iperf -s  > ./outputs/receiver_h515.txt &') 
    h516.cmd('iperf -s  > ./outputs/receiver_h516.txt &') 
    h61.cmd('iperf -s  > ./outputs/receiver_h61.txt &') 
    h62.cmd('iperf -s  > ./outputs/receiver_h62.txt &') 
    h63.cmd('iperf -s  > ./outputs/receiver_h63.txt &') 
    h64.cmd('iperf -s  > ./outputs/receiver_h64.txt &') 
    h65.cmd('iperf -s  > ./outputs/receiver_h65.txt &') 
    h66.cmd('iperf -s  > ./outputs/receiver_h66.txt &') 
    h67.cmd('iperf -s  > ./outputs/receiver_h67.txt &') 
    h68.cmd('iperf -s  > ./outputs/receiver_h68.txt &') 
    h69.cmd('iperf -s  > ./outputs/receiver_h69.txt &') 
    h610.cmd('iperf -s  > ./outputs/receiver_h610.txt &') 
    h611.cmd('iperf -s  > ./outputs/receiver_h611.txt &') 
    h612.cmd('iperf -s  > ./outputs/receiver_h612.txt &') 
    h613.cmd('iperf -s  > ./outputs/receiver_h613.txt &') 
    h614.cmd('iperf -s  > ./outputs/receiver_h614.txt &') 
    h615.cmd('iperf -s  > ./outputs/receiver_h615.txt &') 
    h616.cmd('iperf -s  > ./outputs/receiver_h616.txt &') 
    h71.cmd('iperf -s  > ./outputs/receiver_h71.txt &') 
    h72.cmd('iperf -s  > ./outputs/receiver_h72.txt &') 
    h73.cmd('iperf -s  > ./outputs/receiver_h73.txt &') 
    h74.cmd('iperf -s  > ./outputs/receiver_h74.txt &') 
    h75.cmd('iperf -s  > ./outputs/receiver_h75.txt &') 
    h76.cmd('iperf -s  > ./outputs/receiver_h76.txt &') 
    h77.cmd('iperf -s  > ./outputs/receiver_h77.txt &') 
    h78.cmd('iperf -s  > ./outputs/receiver_h78.txt &') 
    h79.cmd('iperf -s  > ./outputs/receiver_h79.txt &') 
    h710.cmd('iperf -s  > ./outputs/receiver_h710.txt &') 
    h711.cmd('iperf -s  > ./outputs/receiver_h711.txt &') 
    h712.cmd('iperf -s  > ./outputs/receiver_h712.txt &') 
    h713.cmd('iperf -s  > ./outputs/receiver_h713.txt &') 
    h714.cmd('iperf -s  > ./outputs/receiver_h714.txt &') 
    h715.cmd('iperf -s  > ./outputs/receiver_h715.txt &') 
    h716.cmd('iperf -s  > ./outputs/receiver_h716.txt &') 
    h81.cmd('iperf -s  > ./outputs/receiver_h81.txt &') 
    h82.cmd('iperf -s  > ./outputs/receiver_h82.txt &') 
    h83.cmd('iperf -s  > ./outputs/receiver_h83.txt &') 
    h84.cmd('iperf -s  > ./outputs/receiver_h84.txt &') 
    h85.cmd('iperf -s  > ./outputs/receiver_h85.txt &') 
    h86.cmd('iperf -s  > ./outputs/receiver_h86.txt &') 
    h87.cmd('iperf -s  > ./outputs/receiver_h87.txt &') 
    h88.cmd('iperf -s  > ./outputs/receiver_h88.txt &') 
    h89.cmd('iperf -s  > ./outputs/receiver_h89.txt &') 
    h810.cmd('iperf -s  > ./outputs/receiver_h810.txt &') 
    h811.cmd('iperf -s  > ./outputs/receiver_h811.txt &') 
    h812.cmd('iperf -s  > ./outputs/receiver_h812.txt &') 
    h813.cmd('iperf -s  > ./outputs/receiver_h813.txt &') 
    h814.cmd('iperf -s  > ./outputs/receiver_h814.txt &') 
    h815.cmd('iperf -s  > ./outputs/receiver_h815.txt &') 
    h816.cmd('iperf -s  > ./outputs/receiver_h816.txt &') 
    h91.cmd('iperf -s  > ./outputs/receiver_h91.txt &') 
    h92.cmd('iperf -s  > ./outputs/receiver_h92.txt &') 
    h93.cmd('iperf -s  > ./outputs/receiver_h93.txt &') 
    h94.cmd('iperf -s  > ./outputs/receiver_h94.txt &') 
    h95.cmd('iperf -s  > ./outputs/receiver_h95.txt &') 
    h96.cmd('iperf -s  > ./outputs/receiver_h96.txt &') 
    h97.cmd('iperf -s  > ./outputs/receiver_h97.txt &') 
    h98.cmd('iperf -s  > ./outputs/receiver_h98.txt &') 
    h99.cmd('iperf -s  > ./outputs/receiver_h99.txt &') 
    h910.cmd('iperf -s  > ./outputs/receiver_h910.txt &') 
    h911.cmd('iperf -s  > ./outputs/receiver_h911.txt &') 
    h912.cmd('iperf -s  > ./outputs/receiver_h912.txt &') 
    h913.cmd('iperf -s  > ./outputs/receiver_h913.txt &') 
    h914.cmd('iperf -s  > ./outputs/receiver_h914.txt &') 
    h915.cmd('iperf -s  > ./outputs/receiver_h915.txt &') 
    h916.cmd('iperf -s  > ./outputs/receiver_h916.txt &') 

    # print("all the hosts are ready to receive packets")
    # print("Starting sending packets...\n")

    sleep(2) 
    h11.cmd('iperf -c 10.0.9.31 -n 6667000 -M 1500 > ./outputs/sender_h11.txt &') 
    sleep(0.001) 
    h12.cmd('iperf -c 10.0.5.31 -n 133000 -M 1500 > ./outputs/sender_h12.txt &') 
    sleep(0.001) 
    h13.cmd('iperf -c 10.0.8.31 -n 6000 -M 1500 > ./outputs/sender_h13.txt &') 
    sleep(0.001) 
    h14.cmd('iperf -c 10.0.6.31 -n 133000 -M 1500 > ./outputs/sender_h14.txt &') 
    sleep(0.001) 
    h15.cmd('iperf -c 10.0.9.29 -n 3333000 -M 1500 > ./outputs/sender_h15.txt &') 
    sleep(0.001) 
    h16.cmd('iperf -c 10.0.5.29 -n 6667000 -M 1500 > ./outputs/sender_h16.txt &') 
    sleep(0.001) 
    h17.cmd('iperf -c 10.0.9.27 -n 133000 -M 1500 > ./outputs/sender_h17.txt &') 
    sleep(0.001) 
    h18.cmd('iperf -c 10.0.9.25 -n 13000 -M 1500 > ./outputs/sender_h18.txt &') 
    sleep(0.001) 
    h19.cmd('iperf -c 10.0.7.31 -n 3333000 -M 1500 > ./outputs/sender_h19.txt &') 
    sleep(0.001) 
    h110.cmd('iperf -c 10.0.8.29 -n 6667000 -M 1500 > ./outputs/sender_h110.txt &') 
    sleep(0.001) 
    h111.cmd('iperf -c 10.0.8.27 -n 6000 -M 1500 > ./outputs/sender_h111.txt &') 
    sleep(0.001) 
    h112.cmd('iperf -c 10.0.9.23 -n 667000 -M 1500 > ./outputs/sender_h112.txt &') 
    sleep(0.001) 
    h113.cmd('iperf -c 10.0.8.25 -n 1333000 -M 1500 > ./outputs/sender_h113.txt &') 
    sleep(0.001) 
    h114.cmd('iperf -c 10.0.8.23 -n 133000 -M 1500 > ./outputs/sender_h114.txt &') 
    sleep(0.001) 
    h115.cmd('iperf -c 10.0.8.21 -n 13000 -M 1500 > ./outputs/sender_h115.txt &') 
    sleep(0.001) 
    h116.cmd('iperf -c 10.0.8.19 -n 667000 -M 1500 > ./outputs/sender_h116.txt &') 
    sleep(0.001) 
    h21.cmd('iperf -c 10.0.6.29 -n 6000 -M 1500 > ./outputs/sender_h21.txt &') 
    sleep(0.001) 
    h22.cmd('iperf -c 10.0.5.27 -n 6000 -M 1500 > ./outputs/sender_h22.txt &') 
    sleep(0.001) 
    h23.cmd('iperf -c 10.0.8.17 -n 6000 -M 1500 > ./outputs/sender_h23.txt &') 
    sleep(0.001) 
    h24.cmd('iperf -c 10.0.9.21 -n 6000 -M 1500 > ./outputs/sender_h24.txt &') 
    sleep(0.001) 
    h25.cmd('iperf -c 10.0.7.29 -n 6667000 -M 1500 > ./outputs/sender_h25.txt &') 
    sleep(0.001) 
    h26.cmd('iperf -c 10.0.8.15 -n 133000 -M 1500 > ./outputs/sender_h26.txt &') 
    sleep(0.001) 
    h27.cmd('iperf -c 10.0.5.25 -n 1333000 -M 1500 > ./outputs/sender_h27.txt &') 
    sleep(0.001) 
    h28.cmd('iperf -c 10.0.7.27 -n 133000 -M 1500 > ./outputs/sender_h28.txt &') 
    sleep(0.001) 
    h29.cmd('iperf -c 10.0.8.13 -n 6000 -M 1500 > ./outputs/sender_h29.txt &') 
    sleep(0.001) 
    h210.cmd('iperf -c 10.0.6.27 -n 1333000 -M 1500 > ./outputs/sender_h210.txt &') 
    sleep(0.001) 
    h211.cmd('iperf -c 10.0.8.11 -n 53000 -M 1500 > ./outputs/sender_h211.txt &') 
    sleep(0.001) 
    h212.cmd('iperf -c 10.0.5.23 -n 6000 -M 1500 > ./outputs/sender_h212.txt &') 
    sleep(0.001) 
    h213.cmd('iperf -c 10.0.9.19 -n 13000 -M 1500 > ./outputs/sender_h213.txt &') 
    sleep(0.001) 
    h214.cmd('iperf -c 10.0.7.25 -n 133000 -M 1500 > ./outputs/sender_h214.txt &') 
    sleep(0.001) 
    h215.cmd('iperf -c 10.0.8.9 -n 19000 -M 1500 > ./outputs/sender_h215.txt &') 
    sleep(0.001) 
    h216.cmd('iperf -c 10.0.7.23 -n 20000000 -M 1500 > ./outputs/sender_h216.txt &') 
    sleep(0.001) 
    h31.cmd('iperf -c 10.0.9.17 -n 133000 -M 1500 > ./outputs/sender_h31.txt &') 
    sleep(0.001) 
    h32.cmd('iperf -c 10.0.7.21 -n 3333000 -M 1500 > ./outputs/sender_h32.txt &') 
    sleep(0.001) 
    h33.cmd('iperf -c 10.0.5.21 -n 20000000 -M 1500 > ./outputs/sender_h33.txt &') 
    sleep(0.001) 
    h34.cmd('iperf -c 10.0.9.15 -n 667000 -M 1500 > ./outputs/sender_h34.txt &') 
    sleep(0.001) 
    h35.cmd('iperf -c 10.0.9.13 -n 53000 -M 1500 > ./outputs/sender_h35.txt &') 
    sleep(0.001) 
    h36.cmd('iperf -c 10.0.9.11 -n 667000 -M 1500 > ./outputs/sender_h36.txt &') 
    sleep(0.001) 
    h37.cmd('iperf -c 10.0.5.19 -n 133000 -M 1500 > ./outputs/sender_h37.txt &') 
    sleep(0.001) 
    h38.cmd('iperf -c 10.0.8.7 -n 6667000 -M 1500 > ./outputs/sender_h38.txt &') 
    sleep(0.001) 
    h39.cmd('iperf -c 10.0.6.25 -n 19000 -M 1500 > ./outputs/sender_h39.txt &') 
    sleep(0.001) 
    h310.cmd('iperf -c 10.0.7.19 -n 133000 -M 1500 > ./outputs/sender_h310.txt &') 
    sleep(0.001) 
    h311.cmd('iperf -c 10.0.9.9 -n 19000 -M 1500 > ./outputs/sender_h311.txt &') 
    sleep(0.001) 
    h312.cmd('iperf -c 10.0.8.5 -n 53000 -M 1500 > ./outputs/sender_h312.txt &') 
    sleep(0.001) 
    h313.cmd('iperf -c 10.0.6.23 -n 53000 -M 1500 > ./outputs/sender_h313.txt &') 
    sleep(0.001) 
    h314.cmd('iperf -c 10.0.5.17 -n 133000 -M 1500 > ./outputs/sender_h314.txt &') 
    sleep(0.001) 
    h315.cmd('iperf -c 10.0.8.3 -n 19000 -M 1500 > ./outputs/sender_h315.txt &') 
    sleep(0.001) 
    h316.cmd('iperf -c 10.0.6.21 -n 1333000 -M 1500 > ./outputs/sender_h316.txt &') 
    sleep(0.001) 
    h41.cmd('iperf -c 10.0.6.19 -n 19000 -M 1500 > ./outputs/sender_h41.txt &') 
    sleep(0.001) 
    h42.cmd('iperf -c 10.0.9.7 -n 6000 -M 1500 > ./outputs/sender_h42.txt &') 
    sleep(0.001) 
    h43.cmd('iperf -c 10.0.6.17 -n 667000 -M 1500 > ./outputs/sender_h43.txt &') 
    sleep(0.001) 
    h44.cmd('iperf -c 10.0.8.1 -n 1333000 -M 1500 > ./outputs/sender_h44.txt &') 
    sleep(0.001) 
    h45.cmd('iperf -c 10.0.7.17 -n 19000 -M 1500 > ./outputs/sender_h45.txt &') 
    sleep(0.001) 
    h46.cmd('iperf -c 10.0.9.5 -n 3333000 -M 1500 > ./outputs/sender_h46.txt &') 
    sleep(0.001) 
    h47.cmd('iperf -c 10.0.7.15 -n 53000 -M 1500 > ./outputs/sender_h47.txt &') 
    sleep(0.001) 
    h48.cmd('iperf -c 10.0.7.13 -n 667000 -M 1500 > ./outputs/sender_h48.txt &') 
    sleep(0.001) 
    h49.cmd('iperf -c 10.0.6.15 -n 133000 -M 1500 > ./outputs/sender_h49.txt &') 
    sleep(0.001) 
    h410.cmd('iperf -c 10.0.9.3 -n 53000 -M 1500 > ./outputs/sender_h410.txt &') 
    sleep(0.001) 
    h411.cmd('iperf -c 10.0.6.13 -n 13000 -M 1500 > ./outputs/sender_h411.txt &') 
    sleep(0.001) 
    h412.cmd('iperf -c 10.0.9.1 -n 19000 -M 1500 > ./outputs/sender_h412.txt &') 
    sleep(0.001) 
    h413.cmd('iperf -c 10.0.6.11 -n 133000 -M 1500 > ./outputs/sender_h413.txt &') 
    sleep(0.001) 
    h414.cmd('iperf -c 10.0.7.11 -n 3333000 -M 1500 > ./outputs/sender_h414.txt &') 
    sleep(0.001) 
    h415.cmd('iperf -c 10.0.7.9 -n 133000 -M 1500 > ./outputs/sender_h415.txt &') 
    sleep(0.001) 
    h416.cmd('iperf -c 10.0.7.7 -n 667000 -M 1500 > ./outputs/sender_h416.txt &') 
    sleep(0.001) 
    h51.cmd('iperf -c 10.0.6.9 -n 1333000 -M 1500 > ./outputs/sender_h51.txt &') 
    sleep(0.001) 
    h52.cmd('iperf -c 10.0.6.7 -n 6000 -M 1500 > ./outputs/sender_h52.txt &') 
    sleep(0.001) 
    h53.cmd('iperf -c 10.0.7.5 -n 6000 -M 1500 > ./outputs/sender_h53.txt &') 
    sleep(0.001) 
    h54.cmd('iperf -c 10.0.6.5 -n 53000 -M 1500 > ./outputs/sender_h54.txt &') 
    sleep(0.001) 
    h55.cmd('iperf -c 10.0.6.3 -n 1333000 -M 1500 > ./outputs/sender_h55.txt &') 
    sleep(0.001) 
    h56.cmd('iperf -c 10.0.6.1 -n 3333000 -M 1500 > ./outputs/sender_h56.txt &') 
    sleep(0.001) 
    h57.cmd('iperf -c 10.0.7.3 -n 133000 -M 1500 > ./outputs/sender_h57.txt &') 
    sleep(0.001) 
    h58.cmd('iperf -c 10.0.7.1 -n 3333000 -M 1500 > ./outputs/sender_h58.txt &') 
    sleep(0.001)

# def run_sim(net):
#     """
#     Wrapper function to make it easier to call from run_exercise.py
#     """
#     sim = type('', (), {})()  # Create a simple object
#     sim.net = net
#     return sending_function(sim)
